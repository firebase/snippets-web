// This snippet file was generated by processing the source file:
// ./firestore-next/test.solution-counters.js
//
// To update the snippets in this file, edit the source and then run
// 'npm run snippets'.

// [START increment_counter_modular]
function incrementCounter(db, ref, num_shards) {
    import { doc, updateDoc, increment } from "firebase/firestore";

    // Select a shard of the counter at random
    const shardId = Math.floor(Math.random() * num_shards).toString();
    const shardRef = doc(ref, 'shards', shardId);

    // Update count
    return updateDoc(shardRef, "count", increment(1));
}
// [END increment_counter_modular]